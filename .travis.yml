language: node_js
cache:
  directories:
  - node_modules
notifications:
  email: false
node_js:
- '7'
- '6'
- '4'
before_script:
- npm prune
script:
- npm run test
after_success:
- npm run semantic-release
- sh -x ./release.sh -p
branches:
  except:
  - "/^v\\d+\\.\\d+\\.\\d+$/"
before_install:
- openssl aes-256-cbc -K $encrypted_b601314e09dc_key -iv $encrypted_b601314e09dc_iv
  -in deploy_key.enc -out deploy_key -d
